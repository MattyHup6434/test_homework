<!DOCTYPE html>
<html>
<head>
<title>Matty</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body class="w3-black">
  <div class="w3-top">
    <div class="w3-bar w3-white w3-black w3-padding w3-card">
      <!-- Float links to the right. Hide them on small screens -->
      <div class="w3-right w3-hide-small">
          <a href="index.html" class="w3-bar-item w3-button">index</a>
          <a href="java.html" class="w3-bar-item w3-button">java</a>
          <a href="api.html" class="w3-bar-item w3-button">api</a>
      </div>
    </div>
  </div>
  

<!-- Icon Bar (Sidebar - hidden on small screens) -->
<nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
  <!-- Avatar image in top left corner -->
  
  <a href="#" class="w3-bar-item w3-button w3-padding-large w3-black">
    <img src="img/IMG_2154.png" style="width:100%">
    <p>API</p>
  </a></a>
</nav>

<!-- Navbar on small screens (Hidden on medium and large screens) -->
<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
  <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
    <a href="#" class="w3-bar-item w3-button" style="width:25% !important">HOME</a>
  </div>
</div>

<!-- Page Content -->
<div class="w3-padding-large" id="main">

  <div class="w3-content w3-justify w3-text-grey w3-padding-64" id="about">
    <h2 class="w3-text-light-grey">BTC-Price</h2>
    <hr style="width:200px" class="w3-opacity">
    
    <div id="cryptoPrice"></div>
    <canvas id="btcChart"></canvas>
    <div id="openClosePrice"></div>


  </div>
    </div>
  </div>

    <!-- Footer -->
  <footer class="w3-content w3-padding-64 w3-text-grey w3-xlarge">
    <i class="fa fa-facebook-official w3-hover-opacity"></i>
    <i class="fa fa-instagram w3-hover-opacity"></i>
    <i class="fa fa-snapchat w3-hover-opacity"></i>
    <i class="fa fa-pinterest-p w3-hover-opacity"></i>
    <i class="fa fa-twitter w3-hover-opacity"></i>
    <i class="fa fa-linkedin w3-hover-opacity"></i>
    <p class="w3-medium">Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank" class="w3-hover-text-green">w3.css</a></p>
  <!-- End footer -->
  </footer>

<!-- END PAGE CONTENT -->
</div>

</body>
</html>

<script>
  // ทำการ fetch ข้อมูลจาก API
  fetch('https://api.coindesk.com/v1/bpi/currentprice.json')
    .then(response => response.json())
    .then(data => {
      // เลือกตำแหน่งที่จะแสดงข้อมูลราคา cryptocurrency
      const cryptoPriceElement = document.getElementById('cryptoPrice');

      // แสดงข้อมูลใน HTML
      cryptoPriceElement.innerHTML = `
        <p>ราคา Bitcoin: ${data.bpi.USD.rate}</p>
        <!-- เพิ่มเพื่อแสดงข้อมูลเพิ่มเติมตามที่ต้องการ -->
      `;
    })
    .catch(error => {
      console.error('Error fetching cryptocurrency price:', error);
    });
    

    // ทำการ fetch ข้อมูลจาก API
fetch('https://api.coindesk.com/v1/bpi/currentprice.json')
.then(response => response.json())
.then(data => {
  // ดึงข้อมูลราคา Bitcoin
  const btcPrice = data.bpi.USD.rate.replace(',', ''); // ลบ comma ในราคา
  const btcTimestamp = new Date(data.time.updatedISO).toLocaleTimeString();

  // ตำแหน่งที่จะแสดงกราฟ
  const btcChartCanvas = document.getElementById('btcChart').getContext('2d');

  // สร้างกราฟเส้น
  const btcChart = new Chart(btcChartCanvas, {
    type: 'line',
    data: {
      labels: [btcTimestamp],
      datasets: [{
        label: 'ราคา Bitcoin (USD)',
        data: [parseFloat(btcPrice)],
        borderColor: 'rgba(255, 99, 132, 1)',
        borderWidth: 1,
        fill: false,
      }]
    },
    options: {
      scales: {
        x: [{
          type: 'time',
          time: {
            unit: 'minute',
          }
        }],
        y: [{
          ticks: {
            callback: function(value, index, values) {
              return '$' + value;
            }
          }
        }]
      }
    }
  });
})
.catch(error => {
  console.error('Error fetching Bitcoin price:', error);
});   

</script>
